<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>M2 User Guide</title>
  <meta name="description" content="User guide for the M2 iOS offline music player.">
  <link rel="icon" type="image/png" href="app-icon.png">
  <link rel="apple-touch-icon" href="app-icon.png">
  <link rel="stylesheet" href="styles.css">
  <script src="main.js" defer></script>
</head>
<body>
  <header class="topbar">
    <a class="brand" href="index.html" aria-label="M2 docs home">
      <img class="site-icon" src="app-icon.png" alt="M2 app icon">
      <span>M2 Docs</span>
    </a>
    <nav class="top-nav" aria-label="Primary">
      <a href="index.html">Home</a>
      <a href="user-guide.html" class="active-link">User Guide</a>
      <a href="developer-guide.html">Developer Guide</a>
    </nav>
  </header>

  <main class="layout">
    <aside class="toc card">
      <p class="toc-title">Contents</p>
      <nav>
        <a href="#getting-started">Getting Started</a>
        <a href="#add-music">Add Music Files</a>
        <a href="#music-tab">Music Tab</a>
        <a href="#mini-player">Mini Player</a>
        <a href="#full-player">Full Player</a>
        <a href="#playlists">Playlists</a>
        <a href="#favorites">Favorites</a>
        <a href="#sleep-timer">Sleep Timer</a>
        <a href="#tips">Tips</a>
        <a href="#faq">FAQ</a>
      </nav>
    </aside>

    <article class="content">
      <section id="getting-started" class="card section">
        <h1>User Guide</h1>
        <p>
          M2 is an offline iOS music player. It plays local files from your device and does not depend on streaming services.
        </p>
        <ol>
          <li>Install and launch the app.</li>
          <li>Open Files app and place songs into `On My iPhone -> M2 -> M2`.</li>
          <li>Open M2 and tap refresh in Music tab if needed.</li>
        </ol>
      </section>

      <section id="add-music" class="card section">
        <h2>Add Music Files</h2>
        <ul>
          <li>Location used by app: `On My iPhone -> M2 -> M2`.</li>
          <li>After copying files, open M2 and refresh the list.</li>
          <li>If metadata exists in file tags, title/artist/artwork are extracted automatically.</li>
        </ul>
      </section>

      <section id="music-tab" class="card section">
        <h2>Music Tab</h2>
        <ul>
          <li>Browse all local tracks.</li>
          <li>Pull down to reveal search UI, or tap search icon.</li>
          <li>Tap a song to start playback and open player.</li>
          <li>Swipe actions:
            Delete track, Add to playlist, Favorite/Unfavorite.
          </li>
        </ul>
      </section>

      <section id="mini-player" class="card section">
        <h2>Mini Player</h2>
        <ul>
          <li>Visible at the bottom when a track is selected.</li>
          <li>Tap left area to open full player.</li>
          <li>Use previous/play-pause/next buttons directly.</li>
          <li>Horizontal swipe on mini player triggers previous/next track.</li>
        </ul>
      </section>

      <section id="full-player" class="card section">
        <h2>Full Player</h2>
        <ul>
          <li>Large artwork with title and artist.</li>
          <li>Seek bar with elapsed and total time.</li>
          <li>Transport controls: previous, play/pause, next.</li>
          <li>Modes: shuffle and repeat (none -> queue -> single track).</li>
          <li>Favorite button and sleep timer button.</li>
          <li>Shows preview text for next track in queue.</li>
        </ul>
      </section>

      <section id="playlists" class="card section">
        <h2>Playlists</h2>
        <ul>
          <li>Create playlists with + button.</li>
          <li>Creation flow: name playlist -> select tracks -> create.</li>
          <li>Playlist details screen:
            play, shuffle, rename, change cover, add tracks, delete playlist.
          </li>
          <li>Swipe on playlist tracks to remove or favorite.</li>
          <li>The app can maintain a smart playlist called `Lovely songs` automatically.</li>
        </ul>
      </section>

      <section id="favorites" class="card section">
        <h2>Favorites</h2>
        <ul>
          <li>Add/remove favorites from Music list, Playlist details, or Full Player.</li>
          <li>Favorites tab displays only liked tracks.</li>
          <li>You can play favorites as a queue from the selected track.</li>
        </ul>
      </section>

      <section id="sleep-timer" class="card section">
        <h2>Sleep Timer</h2>
        <ul>
          <li>Available in Full Player and Playlist detail header.</li>
          <li>Quick presets: 15, 30, 45, 60 minutes.</li>
          <li>Custom input accepted in minutes or `h:mm` / `h:mm:ss` format.</li>
          <li>Maximum value is 24 hours.</li>
          <li>When timer ends, playback pauses automatically.</li>
        </ul>
      </section>

      <section id="tips" class="card section">
        <h2>Tips</h2>
        <ul>
          <li>If a track has no embedded artwork, the app generates a placeholder cover.</li>
          <li>Background audio is enabled, so playback continues when app is not foregrounded.</li>
          <li>Remote controls (lock screen/control center) are supported while playback is active.</li>
        </ul>
      </section>

      <section id="faq" class="card section">
        <h2>FAQ</h2>

        <h3>I copied files but do not see songs</h3>
        <ul>
          <li>Check exact folder path: `On My iPhone -> M2 -> M2`.</li>
          <li>Use refresh action in Music tab.</li>
        </ul>

        <h3>Playlist shows fewer tracks than before</h3>
        <ul>
          <li>Some source files may have been deleted or moved in Files app.</li>
          <li>Playlist references are repaired to existing local files during reload.</li>
        </ul>

        <h3>Sleep timer icon is not updated instantly</h3>
        <ul>
          <li>Reopen player screen or switch tab to force immediate redraw if needed.</li>
        </ul>
      </section>
    </article>
  </main>

  <footer class="footer">
    <p>User-facing documentation for M2.</p>
    <p id="generated-at"></p>
  </footer>
</body>
</html>
